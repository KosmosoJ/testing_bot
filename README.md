# Телеграм Бот-тестер 

## Библиотеки

Телеграм - **Aiogram 3.0.0b7**

База данных - **sqlalchemy(asyncpg)**, **alembic**

Все необходимые библиотеки описаны в [requirements.txt](requirements.txt)

Создайте виртуальное окружение используя **virtualenv**

    pip install virtualenv

    python -m venv .venv

Активируйте окружение 

### Win

> .venv/scripts/activate

### Lunix

> source .venv/bin/activate


Установите необходимые библиотеки

    pip install -r requirements.txt

## Настройки 

Укажите необходимые переменные в [settings.ini](settings.ini)

Укажите полный путь до базы данных в переменную **sqlalchemy.url** в [alembic.ini](alembic.ini):63

Для создания таблиц используйте

    alembic upgrade head


## Запуск

Для запуска используется файл [main.py](main.py)

## Функционал 
Создание, редактирование и удаление тестов, вопросов, ответов

Прохождение тестов с выводом полученных баллов в чат по команде **/tests**


### Пользовательские команды
**/start** - Старт работы с ботом.

Все действия можно отменить словом **отмена**

***
Ветвления команды **/tests**:

1 - Вывод всех созданных тестов

2 - Прохождение теста

    Запрашивается тест, после чего из закрепленных к тесту вопросов - выбираются случайные, пока не закончатся.
    Позиции ответов в клавиатуре также выводятся случайно.

    По завершению теста выводит сообщение об этом и добавляет пользователя в прошедших выбранный тест

3 - Просмотр пройденных тестов

***
### Админ команды

Практически все команды после "/" требуют ввода "a" - **/ahelp**,  **/atests**...

**/ahelp** - Вывод созданных админ-команд

**/atests** - Добавление, просмотр, редактирование и удаление теста

**/aquestions** - Добавление, просмотр, редактирование и удаление вопросов

**/aanswers** - Добавление, просмотр, редактирование и удаление ответов

**/completed** - Просмотр всех пройденных пользователями тестов

***

Ветвления команды **/atests**:

1 - Создание теста

    Запрашивается название теста, после чего тест создается и вносится в базу данных

2 - Просмотр тестов 

    Выводит все созданные тесты 

3 - Редактирование теста, изменение названия теста.

    Запрашивается название теста для изменения. После чего запрос нового названия теста

4 - Удаление теста

***


Ветвления команды - **/aquestions**:

1 - Создание вопроса

    Запрашивается название теста, к которому будет добавление вопрос. Запрос названия вопроса, после чего вопрос вносится в базу данных

2 - Посмотреть вопросы

    Запрашивается название теста, к которому привязаны вопроса, выводит все вопросы. 

3 - Редактировать вопрос

    Запрашивается название теста, название вопроса, после чего запрашивается новый вопрос

4 - Удаление вопроса

    Запрашивается название теста, к которому привязан вопрос, после чего запрашивается вопрос, который будет удален из базы данных


***

Ветвления команды - **/aanswers**:

1 - Добавление ответов

    Запрашивается тест, вопрос, к которому будут добавлены ответы. Минимум и максимум ответов - 4 

2 - Редактировать ответ

    Запрашивается тест, вопрос, ответ, который будет изменен.

3 - Посмотреть ответы

    Запрашивается тест, вопрос, к которому привязаны ответы, после чего выводит ответы в чат